---
title: "Long-term care homes were hit hardest by 2023 disease outbreaks in Toronto healthcare facilities"
author:
  - Benny Rochwerg
thanks: "A GitHub Repository containing all data, R code, and other files used in this investigation is located here: <https://github.com/bennyrochwerg/healthcare-outbreaks-toronto>"
date: 01-23-2024
date-format: long
abstract: "In this report, 2023 Toronto Public Health data on outbreaks in healthcare facilities was analyzed. Long-term care homes comprised a majority of the outbreaks, approximately 95% of the outbreaks were respiratory, and almost two-thirds of the outbreaks had COVID-19 as their first known cause. This highlights the need for enhanced public health measures in healthcare facilities, particularly in long-term care homes. Future research should assess disease outbreaks in additional settings, such as workplaces and schools, to gain further insight into the extent of this issue."
format: pdf
number-sections: true
# The toc parameter used to create a table of contents was obtained from
# Quarto documentation:
# https://quarto.org/docs/reference/formats/pdf.html
toc: true
bibliography: references.bib
---

```{r}
#| echo: false
#| warning: false
#### Preamble ####

# Purpose: Generates a paper titled "Long-term care homes were hit hardest by
# 2023 disease outbreaks in Toronto healthcare facilities" in PDF format when
# rendered.
# Author: Benny Rochwerg
# Date: January 23, 2024
# Contact: 4321benny@gmail.com
# Pre-requisites: Run the files "01-download_data.R" and "02-data_cleaning.R".
```

```{r}
#| echo: false
#| warning: false
#### Loading Packages ####

# install.packages("tidyverse")
# install.packages("here")
library(tidyverse)
library(here)
```

# Introduction {#sec-introduction}

In March 2020, the World Health Organization proclaimed that the spread of COVID-19 constituted a pandemic [@whocovid]. Shortly thereafter, in May 2020, the COVID-19 mortality rate in Canadian long-term care homes, where individuals live and receive healthcare on a continuous basis for reasons such as "advancing age, disability or declining health" [@ltchdefinition], reached approximately 35\% and represented 81\% of Canadian COVID-19 deaths [@cihi]. In general, the risk of disease circulation is greater in healthcare settings due to an increased presence of ill individuals and nearer physical contact between patients and staff [@cdc].

Consequently, with the recent advent of large volumes of respiratory diseases such as influenza and COVID-19 in Toronto [@covidflu], assessing the prevalence of disease outbreaks in healthcare facilities in Toronto is of paramount importance. According to @tphdataset, an outbreak is "a localized increase (e.g. in an institution, or a specific ward or floor within an institution) in the rate of infection or illness, above that which is expected". Thus, this investigation examines the number of outbreaks by location type (long-term care homes, retirement homes, hospitals, and transitional care facilities), outbreak type (respiratory and enteric/gastroenteric, the latter referring to intestinal and/or stomach illness [@enteric; @gastroenteric]), and first known cause (e.g., COVID-19, influenza A, etc.) to fill this knowledge gap.

To do this, 2023 Toronto Public Health data on outbreaks in healthcare facilities was first obtained as described in @sec-data-overview. Based on this dataset, it was discovered that long-term care homes comprised a majority of the outbreaks, that approximately 95\% of the outbreaks were respiratory, and that almost two-thirds of the outbreaks had COVID-19 as their first known cause (@sec-data-results). As discussed in @sec-discussion, the high prevalence of outbreaks in long-term care homes has likely been exacerbated by the removal of a universal masking requirement, suggesting that the Government of Ontario should consider reinstating this policy to protect these vulnerable individuals. With respect to the structure of this paper, @sec-data includes an overview of the data and the results; @sec-discussion includes a discussion of the results; and @sec-appendix includes supplementary information.

# Data {#sec-data}

## Overview {#sec-data-overview}

The dataset used in this analysis is the 2023 installment of "Outbreaks in Toronto Healthcare Institutions" from Toronto Public Health [@tphdataset]. In Ontario, the law mandates that respiratory and gastroenteric infections in healthcare facilities are followed and that any outbreaks, regardless of verification, are reported to public health entities such as Toronto Public Health [@tphdataset]. Based on this information (or these measurements), Toronto Public Health updates this dataset on a weekly basis [@tphdataset]. Moreover, this dataset is considered to be "open data" [@tphdataset] and can be utilized for a variety of purposes as long as an attribution statement is attached (@sec-appendix-attribution) and the link to the City of Toronto's Open Data License is added [@tphlicense].

The variables or measurements included in this analysis are "Type of Location" (named "Outbreak Setting" in the original dataset), which refers to the nature of the healthcare offered at each facility; "Type of Outbreak", which indicates whether each outbreak is respiratory, enteric, or other in nature; and "Outbreak First Known Cause" (named "Causative Agent-1" in the original dataset), which denotes the first discovered pathogen based on at least one of the outbreak's cases [@tphdataset].

Only two other datasets involving outbreaks, titled "COVID-19 Cases in Toronto" and "Daily Shelter & Overnight Service Occupancy & Capacity", could be identified following a search of the City of Toronto's Open Data Catalogue [@tphsearch]. However, none of these datasets pertain specifically to healthcare settings in Toronto and were thus not used in this analysis.

Using the R programming language [@citeR], the `janitor` [@citejanitor] and `tidyverse` [@citetidyverse] packages were used to simulate the dataset and generate tests for it. The `opendatatoronto` [@citeopendatatoronto] and `tidyverse` [@citetidyverse] packages were then applied in order to download the raw Toronto Public Health dataset. Next, the `tidyverse` package [@citetidyverse] was used to clean the raw dataset and test the cleaned dataset.

## Results {#sec-data-results}

```{r}
#| echo: false
#| warning: false
#| message: false

#### Loading the Cleaned Dataset ####

outbreak_cleaned_data <- read_csv(here::here("outputs/data/cleaned_data.csv"))
```

After loading the dataset using the R programming language [@citeR] and the `here` package [@citehere], the `tidyverse` [@citetidyverse] package was used to generate graphs. In doing so, R code was adapted from @tellingstorieswithdata.

\newpage

```{r}
#| echo: false
#| warning: false

#### First Graph Labels ####

# This code is based on knowledge from Alexander (2023).

# Preparing the necessary data to create the labels
location_data <- outbreak_cleaned_data |>
  count(`Type of Location`) |>
  rename(`Type of location` = `Type of Location`,
         `Number of outbreaks` = n) |>
  mutate(`Percentage of total outbreaks` =
           round(100 * `Number of outbreaks` / nrow(outbreak_cleaned_data), 0)) |>
  arrange(desc(`Number of outbreaks`))

# Generating the labels using the paste function from the Help pane in RStudio
location_data_labels <- paste(
    location_data$`Number of outbreaks`, " (", location_data$`Percentage of total outbreaks`, "%)", sep = "")

# Adding the labels to the location data table
location_data <- location_data |>
  mutate(`Label` = location_data_labels)
```

```{r}
#| echo: false
#| warning: false
#| label: fig-outbreaks-by-location-type
#| fig-cap: "Number of outbreaks by type of healthcare location in Toronto in 2023"

#### First Graph ####

# This code is based on knowledge from Alexander (2023).

outbreak_cleaned_data |>
  count(`Type of Location`) |>
  # The reorder function used for sorting the columns in descending order was obtained
  # from Stack Overflow:
  # https://stackoverflow.com/questions/25664007/reorder-bars-in-geom-bar-ggplot2-by-value
  ggplot(mapping = aes(x = reorder(location_data$`Type of location`, location_data$`Number of outbreaks`), y = location_data$`Number of outbreaks`)) +
  geom_col() +
  theme_classic() +
  labs(x = "Type of location", y = "Number of outbreaks") +
  coord_flip() +
  # The geom_text function used to add the labels to the graph was obtained from
  # R Graphics Cookbook:
  # https://r-graphics.org/recipe-bar-graph-labels
  # The hjust argument used to align the labels was obtained from
  # Cédric Scherer's website:
  # https://www.cedricscherer.com/2021/07/05/a-quick-how-to-on-labelling-bar-graphs-in-ggplot2/
  geom_text(aes(label = location_data$`Label`), hjust = c(1, 0, 0, 0, 0, 0), colour = "magenta")
```

@fig-outbreaks-by-location-type illustrates that long-term care homes comprised a majority (approximately 56\%) of the total number of 2023 healthcare outbreaks in Toronto. This was followed by retirement homes (approximately 18\%), chronic care settings in hospitals (approximately 12\%), acute care settings in hospitals (approximately 10\%), psychiatric care settings in hospitals (approximately 2\%), and transitional care locations (approximately 1\%). Note that these percentages do not add up to 100\% as they were rounded to the nearest integer.

\newpage

```{r}
#| echo: false
#| warning: false

#### Second Graph Labels ####

# This code is based on knowledge from Alexander (2023).

# Preparing the necessary data to create the labels
outbreak_data <- outbreak_cleaned_data |>
  count(`Type of Outbreak`) |>
  rename(`Type of outbreak` = `Type of Outbreak`,
         `Number of outbreaks` = n) |>
  mutate(`Percentage of total outbreaks` =
           round(100 * `Number of outbreaks` / nrow(outbreak_cleaned_data), 0)) |>
  arrange(desc(`Number of outbreaks`))

# Generating the labels using the paste function from the Help pane in RStudio
outbreak_data_labels <- paste(
    outbreak_data$`Number of outbreaks`, " (", outbreak_data$`Percentage of total outbreaks`, "%)", sep = "")

# Adding the labels to the outbreak data table
outbreak_data <- outbreak_data |>
  mutate(`Label` = outbreak_data_labels)
```

```{r}
#| echo: false
#| warning: false
#| label: fig-outbreaks-by-outbreak-type
#| fig-cap: "Number of outbreaks by type of outbreak for Toronto healthcare locations in 2023"

#### Second Graph ####

# This code is based on knowledge from Alexander (2023).

outbreak_cleaned_data |>
  count(`Type of Outbreak`) |>
  # The reorder function used for sorting the columns in descending order was obtained
  # from Stack Overflow:
  # https://stackoverflow.com/questions/25664007/reorder-bars-in-geom-bar-ggplot2-by-value
  ggplot(mapping = aes(x = reorder(outbreak_data$`Type of outbreak`, -outbreak_data$`Number of outbreaks`), y = outbreak_data$`Number of outbreaks`)) +
  geom_col() +
  theme_classic() +
  labs(x = "Type of outbreak", y = "Number of outbreaks") +
  # The geom_text function and vjust argument used to add the labels to the
  # graph were obtained from R Graphics Cookbook:
  # https://r-graphics.org/recipe-bar-graph-labels
  geom_text(aes(label = outbreak_data$`Label`), vjust = -0.15, colour = "magenta")
```

@fig-outbreaks-by-outbreak-type shows that the vast majority of 2023 healthcare outbreaks in Toronto were respiratory in nature (approximately 95\%). This was followed by enteric outbreaks (approximately 4\%) and other types of outbreaks (less than 1\%). Note that these percentages do not add up to 100\% as they were rounded to the nearest integer.

\newpage

```{r}
#| echo: false
#| warning: false

#### Third Graph Labels ####

# This code is based on knowledge from Alexander (2023).

# Preparing the necessary data to create the labels
first_known_cause_data <- outbreak_cleaned_data |>
  count(`Outbreak First Known Cause`) |>
  rename(`Outbreak first known cause` = `Outbreak First Known Cause`,
         `Number of outbreaks` = n) |>
  mutate(`Percentage of total outbreaks` =
           round(100 * `Number of outbreaks` / nrow(outbreak_cleaned_data), 0)) |>
  arrange(desc(`Number of outbreaks`))

# Generating the labels using the paste function from the Help pane in RStudio
first_known_cause_data_labels <- paste(" ",
    first_known_cause_data$`Number of outbreaks`, " (", first_known_cause_data$`Percentage of total outbreaks`, "%)", sep = "")

# Adding the labels to the first known cause data table
first_known_cause_data <- first_known_cause_data |>
  mutate(`Label` = first_known_cause_data_labels)
```

```{r}
#| echo: false
#| warning: false
#| label: fig-outbreaks-by-first-known-cause
#| fig-cap: "Number of outbreaks by first known cause for Toronto healthcare locations in 2023"

#### Third Graph ####

# This code is based on knowledge from Alexander (2023).

outbreak_cleaned_data |>
  count(`Outbreak First Known Cause`) |>
  # The reorder function used for sorting the columns in descending order was obtained
  # from Stack Overflow:
  # https://stackoverflow.com/questions/25664007/reorder-bars-in-geom-bar-ggplot2-by-value
  ggplot(mapping = aes(x = reorder(first_known_cause_data$`Outbreak first known cause`, first_known_cause_data$`Number of outbreaks`), y = first_known_cause_data$`Number of outbreaks`)) +
  geom_col() +
  theme_classic() +
  labs(x = "Outbreak first known cause", y = "Number of outbreaks") +
  coord_flip() +
  # The geom_text function used to add the labels to the graph was obtained from
  # R Graphics Cookbook:
  # https://r-graphics.org/recipe-bar-graph-labels
  # The hjust argument used to align the labels was obtained from
  # Cédric Scherer's website:
  # https://www.cedricscherer.com/2021/07/05/a-quick-how-to-on-labelling-bar-graphs-in-ggplot2/
  geom_text(aes(label = first_known_cause_data$`Label`), hjust = c(1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), colour = "magenta", size = 3)
```

@fig-outbreaks-by-first-known-cause illustrates that the majority of 2023 Toronto healthcare outbreaks had COVID-19 as their first known cause (approximately 66\%). This was followed by rhinovirus (approximately 7\%), respiratory syncytial virus (approximately 5\%), parainfluenza (approximately 3\%), influenza A (approximately 3\%), seasonal coronavirus (approximately 3\%), metapneumovirus (approximately 2\%), norovirus (approximately 2\%), enterovirus/rhinovirus (approximately 1\%), enterovirus (approximately 1\%), CPE (less than 1\%), streptococcus pyogenes (less than 1\%), and neonatal Group B streptococcal disease (less than 1\%). Approximately 7\% of outbreaks had a pending or unknown first known cause.

# Discussion {#sec-discussion}

In @sec-data-results, it was observed that long-term care homes had the greatest proportion of the total outbreaks among healthcare facilities in Toronto in 2023 (@fig-outbreaks-by-location-type), that approximately 95\% of the outbreaks were respiratory in nature (@fig-outbreaks-by-outbreak-type), and that COVID-19 was the first known cause of a majority of the outbreaks (@fig-outbreaks-by-first-known-cause).

All three of these results share common origins. For instance, in October 2022, the Government of Ontario removed a masking requirement for caregivers and visitors in long-term care homes [@cbcltch], whose residents are primarily at or above 65 years of age with an average age of 83 years as reported in 2018 [@clri]. Since individuals aged 60 years or older are more likely to experience worse health effects after contracting COVID-19, the Public Health Agency of Canada recommends that they wear a respirator or mask to limit the transmission of this pathogen [@phaccovid]. As a result, it seems that the Government of Ontario did not heed this advice, possibly contributing to the large proportion of disease outbreaks (which include COVID-19) in Toronto long-term care homes in 2023. This appears to follow a long-standing trend in Ontario long-term care homes. For example, at the start of the COVID-19 pandemic, long-term care homes in Ontario experienced a sizable increase in COVID-19 cases [@cbcinquiry]. This was potentially made worse by the fact that not all of these facilities enforced mask-wearing and that long-term care homes were passed over for personal protective equipment in favour of hospitals [@cbcinquiry]. Moreover, the fact that several hospitals in Toronto curtailed their mask requirements in June and July of 2023 [@hospitalmasks] likely contributed to the large volume of respiratory disease outbreaks observed in @fig-outbreaks-by-outbreak-type.

Although over 1,000 data points pertaining to healthcare outbreaks in Toronto in 2023 were examined in this analysis, several limitations were present. For instance, asymptomatic disease outbreaks were likely not included in the studied dataset as they may not have been noticeable enough to be reported, contributing to an underestimate of the total number of outbreaks. In addition, only the first known cause of each outbreak was examined for clarity purposes. This also likely led to an underestimate of the number of outbreaks associated with each disease.

Future research should be conducted to assess the state of disease outbreaks in long-term care homes in particular, both in Toronto and across Canada, in order to gain deeper insight into this critical issue. The prevalence of disease outbreaks in additional settings, such as schools and workplaces, should also be investigated to expand on this analysis.

\newpage

\appendix

# Appendix {#sec-appendix}

## Dataset and Graph Sketches {#sec-appendix-sketches}

Sketches depicting both the desired dataset and the graphs generated in this analysis are available in the GitHub Repository.

## Data Cleaning {#sec-appendix-cleaning}

The data cleaning process involved filtering out some of the columns from the raw dataset and renaming some of the data entries for clarity and simplicity.

## Attribution Statement {#sec-appendix-attribution}

"Contains information licensed under the Open Government Licence – Toronto" [@tphlicense].

\newpage

# References {#sec-references}